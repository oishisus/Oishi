/* =========================================
   7. BOTÓN FLOTANTE DEL CARRITO (PREMIUM - CORREGIDO V2)
   ========================================= */
.cart-float {
    position: fixed;
    bottom: 30px;
    right: 30px;

    /* DIMENSIONES INICIALES (CÍRCULO) */
    height: 64px;
    width: 64px;

    /* ESTILO VISUAL UNIFICADO (Para que parezca un solo objeto) */
    background: linear-gradient(135deg, #e63946 0%, #d00000 100%);
    color: white;
    border-radius: 50px;
    /* Radio alto para que siempre sea cápsula */
    border: none;

    /* SOMBRA ÚNICA (Se estira con el botón) */
    box-shadow: 0 10px 25px rgba(230, 57, 70, 0.6),
        inset 0 2px 3px rgba(255, 255, 255, 0.2);

    /* LAYOUT INTERNO */
    display: flex;
    align-items: center;
    justify-content: flex-start;
    /* Alinear a la izquierda para que crezca hacia la izquierda/centro */
    padding: 0;
    overflow: hidden;
    z-index: 1000;
    cursor: pointer;

    /* TRANSICIÓN FLUIDA DE UN SOLO OBJETO */
    /* Animamos el ancho, la sombra y la transformación al mismo tiempo */
    transition: width 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275),
        transform 0.2s ease,
        box-shadow 0.4s ease;
}

/* --- WRAPPER DEL ICONO (LADO IZQUIERDO) --- */
.cart-icon-wrapper {
    width: 64px;
    /* Ancho fijo igual a la altura */
    height: 64px;
    flex-shrink: 0;
    /* Evita que el icono se aplaste al animar */
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 2;
    /* IMPORTANTE: Sin background ni shadow aquí para evitar el efecto "doble bola" */
}

/* --- BADGE (CONTADOR) --- */
.cart-float-badge {
    position: absolute;
    top: 14px;
    right: 14px;
    background: white;
    color: var(--accent-primary);
    font-weight: 900;
    font-size: 0.75rem;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    border: 2px solid #d00000;
}

/* --- TEXTO QUE SE EXPANDE (LADO DERECHO) --- */
.cart-label-container {
    display: flex;
    align-items: center;
    gap: 8px;
    /* Estado inicial oculto */
    opacity: 0;
    transform: translateX(-10px);
    white-space: nowrap;
    transition: all 0.3s ease;
    /* Retraso ligero para que aparezca mientras se abre */
    transition-delay: 0.05s;
}

.cart-label-text {
    font-weight: 700;
    font-size: 0.95rem;
    padding-right: 5px;
}

.cart-arrow {
    margin-right: 20px;
    /* Margen derecho para separar del borde final */
    opacity: 0.8;
}

/* --- INTERACCIÓN HOVER (SOLO PC) --- */
@media (hover: hover) {
    .cart-float:hover {
        width: 200px;
        /* AQUÍ OCURRE LA MAGIA: El contenedor crece */
        transform: translateY(-5px);
        /* Se levanta un poco */
        box-shadow: 0 20px 40px rgba(230, 57, 70, 0.5);
        /* La sombra crece con él */
    }

    .cart-float:hover .cart-label-container {
        opacity: 1;
        transform: translateX(0);
    }

    /* Ocultar tooltip viejo si existiera */
    .cart-float-tooltip {
        display: none !important;
    }
}

/* --- ESTADO MÓVIL (Mantiene forma circular perfecta) --- */
@media (max-width: 768px) {
    .cart-float {
        width: 60px;
        height: 60px;
        bottom: 25px;
        right: 25px;
        /* En móvil no se expande el ancho, solo efecto pulsación */
    }

    .cart-icon-wrapper {
        width: 60px;
        height: 60px;
    }

    .cart-float:active {
        transform: scale(0.95);
        box-shadow: 0 5px 15px rgba(230, 57, 70, 0.4);
    }
}

/* --- ANIMACIÓN PULSE (URGENTE) --- */
/* Se aplica a todo el contenedor para que pulse como una unidad */
@keyframes singlePulse {
    0% {
        box-shadow: 0 0 0 0 rgba(230, 57, 70, 0.7);
    }

    70% {
        box-shadow: 0 0 0 15px rgba(230, 57, 70, 0);
    }

    100% {
        box-shadow: 0 0 0 0 rgba(230, 57, 70, 0);
    }
}

.pulse-urgent {
    animation: singlePulse 2s infinite;
}

.animate-bounce-in {
    animation: bounceIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes bounceIn {
    0% {
        transform: scale(0);
        opacity: 0;
    }

    60% {
        transform: scale(1.1);
        opacity: 1;
    }

    100% {
        transform: scale(1);
    }
}